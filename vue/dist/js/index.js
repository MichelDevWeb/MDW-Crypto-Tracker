(()=>{"use strict";var t={715:(t,o,a)=>{var s=a(751),e=a(641);function i(t,o,a,s,i,n){const r=(0,e.g2)("Popup");return(0,e.uX)(),(0,e.Wv)(r)}var n=a(33);const r={class:"app-container"},c={class:"header"},l={class:"portfolio-stats"},p={class:"stat-item"},d={class:"value"},h={class:"stat-item"},u={class:"value"},m={class:"stat-item"},k={key:0},g={class:"search-container"},f=["value"],v={class:"table-container"},y={class:"table table-dark table-hover"},C=["title"],L={class:"sort-icon"},b={class:"sort-icon"},P={class:"sort-icon"},w={class:"sort-icon"},T={class:"sort-icon"},_=["onClick"],S={class:"rank-icon-cell"},I={class:"rank-number"},$=["src","alt"],D=["href","title"],E={class:"value-pnl-container"},A={class:"action-buttons"},F=["onClick"],H=["onClick"],U={key:0,class:"loading-spinner"},V={key:1,class:"alert alert-danger"},j={key:2,class:"modal"},M={class:"modal-content"},x={class:"form-group"},O={class:"transaction-type-toggle"},X={class:"form-group"},Q={class:"input-with-preview"},W={class:"preview-text"},z={class:"form-group"},B={class:"input-with-preview"},Z={class:"preview-text"},q={class:"form-group"},J={key:0,class:"transaction-preview"},K={class:"modal-actions"},G={type:"submit",class:"btn-primary"},N={key:3,class:"modal"},R={class:"modal-content transaction-history"},Y={class:"transaction-summary"},tt={class:"summary-item"},ot={class:"summary-value"},at={class:"summary-item"},st={class:"summary-value"},et={class:"summary-item"},it={class:"transaction-list"},nt={class:"transaction-details"},rt={class:"transaction-main"},ct={class:"transaction-amount"},lt={class:"transaction-price"},pt={class:"transaction-secondary"},dt={class:"transaction-date"},ht={class:"transaction-actions"},ut=["onClick"],mt=["onClick"],kt={class:"modal-actions"};function gt(t,o,a,i,gt,ft){return(0,e.uX)(),(0,e.CE)("div",r,[(0,e.Lk)("div",c,[o[25]||(o[25]=(0,e.Lk)("h3",null,"MDW Crypto Portfolio Tracker",-1)),(0,e.Lk)("div",l,[(0,e.Lk)("div",p,[o[22]||(o[22]=(0,e.Lk)("span",{class:"label"},"Cost:",-1)),(0,e.Lk)("span",d,"$"+(0,n.v_)(ft.formatPrice(ft.totalCost)),1)]),(0,e.Lk)("div",h,[o[23]||(o[23]=(0,e.Lk)("span",{class:"label"},"Value:",-1)),(0,e.Lk)("span",u,"$"+(0,n.v_)(ft.formatPrice(ft.totalValue)),1)]),(0,e.Lk)("div",m,[o[24]||(o[24]=(0,e.Lk)("span",{class:"label"},"P&L:",-1)),(0,e.Lk)("span",{class:(0,n.C4)(["value",ft.getPnLClass(ft.totalProfitLoss)])},[(0,e.eW)((0,n.v_)(ft.formatPnL(ft.totalProfitLoss))+" ",1),ft.totalCost?((0,e.uX)(),(0,e.CE)("small",k,"("+(0,n.v_)(ft.formatPnLPercentage(ft.totalProfitLoss,ft.totalCost))+")",1)):(0,e.Q3)("",!0)],2)])])]),(0,e.Lk)("div",g,[(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>gt.searchQuery=t),onKeyup:o[1]||(o[1]=(0,s.jR)(((...t)=>ft.handleSearch&&ft.handleSearch(...t)),["enter"])),class:"form-control search-input",placeholder:"Search coins..."},null,544),[[s.Jo,gt.searchQuery]]),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>gt.selectedApi=t),onChange:o[3]||(o[3]=(...t)=>ft.handleApiChange&&ft.handleApiChange(...t)),class:"form-select api-select"},o[26]||(o[26]=[(0,e.Lk)("option",{value:"coingecko"},"CoinGecko",-1),(0,e.Lk)("option",{value:"coincap"},"CoinCap",-1)]),544),[[s.u1,gt.selectedApi]]),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>gt.pageSize=t),onChange:o[5]||(o[5]=(...t)=>ft.fetchCoins&&ft.fetchCoins(...t)),class:"form-select page-size-select"},o[27]||(o[27]=[(0,e.Lk)("option",{value:"25"},"25 per page",-1),(0,e.Lk)("option",{value:"50"},"50 per page",-1),(0,e.Lk)("option",{value:"100"},"100 per page",-1),(0,e.Lk)("option",{value:"200"},"200 per page",-1)]),544),[[s.u1,gt.pageSize]]),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":o[6]||(o[6]=t=>gt.currentPage=t),onChange:o[7]||(o[7]=(...t)=>ft.fetchCoins&&ft.fetchCoins(...t)),class:"form-select page-select"},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(gt.totalPages,(t=>((0,e.uX)(),(0,e.CE)("option",{key:t,value:t}," Page "+(0,n.v_)(t),9,f)))),128))],544),[[s.u1,gt.currentPage]])]),(0,e.Lk)("div",v,[(0,e.Lk)("table",y,[(0,e.Lk)("thead",null,[(0,e.Lk)("tr",null,[(0,e.Lk)("th",null,[(0,e.Lk)("div",{onClick:o[8]||(o[8]=(...t)=>ft.togglePortfolioView&&ft.togglePortfolioView(...t)),class:"portfolio-trigger",title:gt.showPortfolio?"Show all coins":"Show portfolio coins"},(0,n.v_)(gt.showPortfolio?"🌐":"📊"),9,C)]),(0,e.Lk)("th",{onClick:o[9]||(o[9]=t=>ft.sortBy("rank")),class:"sortable"},[o[28]||(o[28]=(0,e.eW)(" Rank ")),(0,e.Lk)("span",L,(0,n.v_)(ft.getSortIcon("rank")),1)]),(0,e.Lk)("th",{onClick:o[10]||(o[10]=t=>ft.sortBy("symbol")),class:"sortable"},[o[29]||(o[29]=(0,e.eW)(" Symbol ")),(0,e.Lk)("span",b,(0,n.v_)(ft.getSortIcon("symbol")),1)]),(0,e.Lk)("th",{onClick:o[11]||(o[11]=t=>ft.sortBy("price")),class:"sortable"},[o[30]||(o[30]=(0,e.eW)(" Price ")),(0,e.Lk)("span",P,(0,n.v_)(ft.getSortIcon("price")),1)]),(0,e.Lk)("th",{onClick:o[12]||(o[12]=t=>ft.sortBy("priceChange24h")),class:"sortable"},[o[31]||(o[31]=(0,e.eW)(" 24h Change ")),(0,e.Lk)("span",w,(0,n.v_)(ft.getSortIcon("priceChange24h")),1)]),(0,e.Lk)("th",{onClick:o[13]||(o[13]=t=>ft.sortBy("value")),class:"sortable"},[o[32]||(o[32]=(0,e.eW)(" Value / PnL ")),(0,e.Lk)("span",T,(0,n.v_)(ft.getSortIcon("value")),1)]),o[33]||(o[33]=(0,e.Lk)("th",null,"Actions",-1))])]),(0,e.Lk)("tbody",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(ft.sortedCoins,(t=>((0,e.uX)(),(0,e.CE)("tr",{key:t.id},[(0,e.Lk)("td",null,[(0,e.Lk)("button",{onClick:o=>ft.togglePortfolio(t),class:(0,n.C4)(["portfolio-btn",t.inPortfolio?"portfolio-btn-active":"portfolio-btn-inactive"])},(0,n.v_)(t.inPortfolio?"✓":"+"),11,_)]),(0,e.Lk)("td",S,[(0,e.Lk)("span",I,"#"+(0,n.v_)(t.rank),1),(0,e.Lk)("img",{src:t.image,alt:t.symbol,class:"coin-icon"},null,8,$)]),(0,e.Lk)("td",null,[(0,e.Lk)("a",{href:`https://www.coingecko.com/en/coins/${t.id}`,target:"_blank",class:"coin-link",title:t.name},(0,n.v_)(t.symbol.toUpperCase()),9,D)]),(0,e.Lk)("td",null,"$"+(0,n.v_)(ft.formatPrice(t.price)),1),(0,e.Lk)("td",{class:(0,n.C4)(["price-change-pill",ft.getPriceChangeClass(t.priceChange24h)])},(0,n.v_)(ft.formatPriceChange(t.priceChange24h)),3),(0,e.Lk)("td",null,[(0,e.Lk)("div",E,[(0,e.Lk)("div",null,"$"+(0,n.v_)(ft.formatPrice(t.holdings*t.price)),1),(0,e.Lk)("div",{class:(0,n.C4)(["pnl-text",ft.getPnLClass(t.pnl)])},(0,n.v_)(ft.formatPnL(t.pnl)),3)])]),(0,e.Lk)("td",null,[(0,e.Lk)("div",A,[(0,e.Lk)("button",{onClick:o=>ft.openTransactionModal(t),class:"action-btn",title:"Add Transaction"}," 💱 ",8,F),(0,e.Lk)("button",{onClick:o=>ft.viewTransactions(t),class:"action-btn",title:"View Transactions"}," 📋 ",8,H)])])])))),128))])])]),gt.loading?((0,e.uX)(),(0,e.CE)("div",U,o[34]||(o[34]=[(0,e.Lk)("div",{class:"spinner-border text-light",role:"status"},[(0,e.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):(0,e.Q3)("",!0),gt.error?((0,e.uX)(),(0,e.CE)("div",V,(0,n.v_)(gt.error),1)):(0,e.Q3)("",!0),o[43]||(o[43]=(0,e.Lk)("footer",{class:"footer"},[(0,e.Lk)("a",{href:"https://chrome.google.com/webstore/detail/mdw-crypto-portfolio-track/njpeiacpcgcfdojjedocmegpkcljibmk",target:"_blank",class:"store-link"}," Available on Chrome Web Store "),(0,e.Lk)("span",{class:"link-separator"},"•"),(0,e.Lk)("a",{href:"https://github.com/MichelDevWeb/MDW-Crypto-Tracker/tree/main",target:"_blank",class:"store-link"}," View on GitHub ")],-1)),gt.showTransactionModal?((0,e.uX)(),(0,e.CE)("div",j,[(0,e.Lk)("div",M,[(0,e.Lk)("h3",null,(0,n.v_)(gt.editingTransaction?"Edit":"Add")+" Transaction for "+(0,n.v_)(gt.selectedCoin?.name),1),(0,e.Lk)("form",{onSubmit:o[20]||(o[20]=(0,s.D$)(((...t)=>ft.saveTransaction&&ft.saveTransaction(...t)),["prevent"]))},[(0,e.Lk)("div",x,[o[35]||(o[35]=(0,e.Lk)("label",null,"Type:",-1)),(0,e.Lk)("div",O,[(0,e.Lk)("button",{type:"button",class:(0,n.C4)(["type-btn","buy"===gt.transaction.type?"active":""]),onClick:o[14]||(o[14]=t=>gt.transaction.type="buy")}," Buy ",2),(0,e.Lk)("button",{type:"button",class:(0,n.C4)(["type-btn","sell"===gt.transaction.type?"active":""]),onClick:o[15]||(o[15]=t=>gt.transaction.type="sell")}," Sell ",2)])]),(0,e.Lk)("div",X,[o[36]||(o[36]=(0,e.Lk)("label",null,"Amount:",-1)),(0,e.Lk)("div",Q,[(0,e.bo)((0,e.Lk)("input",{type:"number","onUpdate:modelValue":o[16]||(o[16]=t=>gt.transaction.amount=t),step:"any",required:"",class:"enhanced-input"},null,512),[[s.Jo,gt.transaction.amount]]),(0,e.Lk)("span",W,"≈ $"+(0,n.v_)(ft.formatPrice(gt.transaction.amount*gt.transaction.price)),1)])]),(0,e.Lk)("div",z,[o[37]||(o[37]=(0,e.Lk)("label",null,"Price per coin:",-1)),(0,e.Lk)("div",B,[(0,e.bo)((0,e.Lk)("input",{type:"number","onUpdate:modelValue":o[17]||(o[17]=t=>gt.transaction.price=t),step:"any",required:"",class:"enhanced-input"},null,512),[[s.Jo,gt.transaction.price]]),(0,e.Lk)("span",Z,"Current: $"+(0,n.v_)(ft.formatPrice(gt.selectedCoin?.price)),1)])]),(0,e.Lk)("div",q,[o[38]||(o[38]=(0,e.Lk)("label",null,"Date:",-1)),(0,e.bo)((0,e.Lk)("input",{type:"datetime-local","onUpdate:modelValue":o[18]||(o[18]=t=>gt.transaction.date=t),required:"",class:"enhanced-input"},null,512),[[s.Jo,gt.transaction.date]])]),null!==ft.transactionPnL?((0,e.uX)(),(0,e.CE)("div",J,[o[39]||(o[39]=(0,e.Lk)("div",{class:"preview-label"},"Transaction PnL:",-1)),(0,e.Lk)("div",{class:(0,n.C4)(["preview-value",ft.getPnLClass(ft.transactionPnL)])},(0,n.v_)(ft.formatPnL(ft.transactionPnL)),3)])):(0,e.Q3)("",!0),(0,e.Lk)("div",K,[(0,e.Lk)("button",G,(0,n.v_)(gt.editingTransaction?"Update":"Save"),1),(0,e.Lk)("button",{type:"button",onClick:o[19]||(o[19]=(...t)=>ft.closeTransactionModal&&ft.closeTransactionModal(...t)),class:"btn-secondary"}," Cancel ")])],32)])])):(0,e.Q3)("",!0),gt.showTransactionHistory?((0,e.uX)(),(0,e.CE)("div",N,[(0,e.Lk)("div",R,[(0,e.Lk)("h3",null,"Transactions for "+(0,n.v_)(gt.selectedCoin?.name),1),(0,e.Lk)("div",Y,[(0,e.Lk)("div",tt,[o[40]||(o[40]=(0,e.Lk)("span",{class:"summary-label"},"Total Holdings",-1)),(0,e.Lk)("span",ot,(0,n.v_)(gt.selectedCoin?.holdings||0)+" "+(0,n.v_)(gt.selectedCoin?.symbol.toUpperCase()),1)]),(0,e.Lk)("div",at,[o[41]||(o[41]=(0,e.Lk)("span",{class:"summary-label"},"Avg Price",-1)),(0,e.Lk)("span",st,"$"+(0,n.v_)(ft.formatPrice(ft.calculateAveragePrice(gt.selectedCoin))),1)]),(0,e.Lk)("div",et,[o[42]||(o[42]=(0,e.Lk)("span",{class:"summary-label"},"Total PnL",-1)),(0,e.Lk)("span",{class:(0,n.C4)(["summary-value",ft.getPnLClass(gt.selectedCoin?.pnl)])},(0,n.v_)(ft.formatPnL(gt.selectedCoin?.pnl)),3)])]),(0,e.Lk)("div",it,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(gt.coinTransactions,((t,o)=>((0,e.uX)(),(0,e.CE)("div",{key:o,class:"transaction-item"},[(0,e.Lk)("div",nt,[(0,e.Lk)("div",rt,[(0,e.Lk)("span",{class:(0,n.C4)(["transaction-type",t.type])},(0,n.v_)(t.type.toUpperCase()),3),(0,e.Lk)("span",ct,(0,n.v_)(t.amount)+" "+(0,n.v_)(gt.selectedCoin?.symbol.toUpperCase()),1),(0,e.Lk)("span",lt," @ $"+(0,n.v_)(ft.formatPrice(t.price)),1)]),(0,e.Lk)("div",pt,[(0,e.Lk)("span",dt,(0,n.v_)(new Date(t.timestamp).toLocaleString()),1),(0,e.Lk)("span",{class:(0,n.C4)(["transaction-pnl",ft.getPnLClass(ft.calculateTransactionPnL(t))])},(0,n.v_)(ft.formatPnL(ft.calculateTransactionPnL(t))),3)])]),(0,e.Lk)("div",ht,[(0,e.Lk)("button",{onClick:o=>ft.editTransaction(t),class:"action-btn",title:"Edit"}," ✏️ ",8,ut),(0,e.Lk)("button",{onClick:o=>ft.deleteTransaction(t),class:"action-btn",title:"Delete"}," 🗑️ ",8,mt)])])))),128))]),(0,e.Lk)("div",kt,[(0,e.Lk)("button",{onClick:o[21]||(o[21]=(...t)=>ft.closeTransactionHistory&&ft.closeTransactionHistory(...t)),class:"btn-secondary"}," Close ")])])])):(0,e.Q3)("",!0)])}const ft={data(){return{coins:[],loading:!1,error:null,searchQuery:"",selectedApi:"coingecko",pageSize:25,portfolio:new Set,currentPage:1,totalPages:10,showPortfolio:!1,showTransactionModal:!1,selectedCoin:null,transaction:{type:"buy",amount:0,price:0,date:(new Date).toLocaleString("sv-SE",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}).slice(0,16)},sortConfig:{key:"rank",direction:"asc"},showTransactionHistory:!1,coinTransactions:[],editingTransaction:null}},computed:{portfolioCoins(){return this.coins.filter((t=>this.portfolio.has(t.id)))},displayedCoins(){return this.showPortfolio?this.portfolioCoins:this.coins},sortedCoins(){const t=[...this.displayedCoins];return this.sortConfig.key?t.sort(((t,o)=>{let a=t[this.sortConfig.key],s=o[this.sortConfig.key];return"symbol"===this.sortConfig.key?(a=a.toUpperCase(),s=s.toUpperCase()):"holdings"===this.sortConfig.key?(a=a||0,s=s||0):"value"===this.sortConfig.key&&(a=(t.holdings||0)*t.price,s=(o.holdings||0)*o.price),a<s?"asc"===this.sortConfig.direction?-1:1:a>s?"asc"===this.sortConfig.direction?1:-1:0})):t},transactionPnL(){if(!this.selectedCoin||!this.transaction.amount||!this.transaction.price)return null;const t=this.selectedCoin.price*this.transaction.amount,o=this.transaction.price*this.transaction.amount;return"buy"===this.transaction.type?t-o:o-t},totalCost(){return this.portfolioCoins.reduce(((t,o)=>{const a=o.transactions||[];let s=0,e=0;return a.forEach((t=>{"buy"===t.type?(s+=t.price*t.amount,e+=t.amount):(s-=t.price*t.amount,e-=t.amount)})),t+s}),0)},totalValue(){return this.portfolioCoins.reduce(((t,o)=>t+o.holdings*o.price),0)},totalProfitLoss(){return this.totalValue-this.totalCost}},methods:{async fetchCoins(){this.loading=!0,this.error=null;try{const t="coingecko"===this.selectedApi?`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=${this.pageSize}&page=${this.currentPage}`:`https://api.coincap.io/v2/assets?limit=${this.pageSize}&offset=${(this.currentPage-1)*this.pageSize}`,o=await fetch(t),a=await o.json();this.coins="coingecko"===this.selectedApi?this.parseCoingeckoData(a):this.parseCoinCapData(a.data)}catch(t){this.error="Failed to fetch cryptocurrency data",console.error(t)}finally{this.loading=!1}},parseCoingeckoData(t){return t.map((t=>({id:t.id,symbol:t.symbol,name:t.name,image:t.image,rank:t.market_cap_rank,price:t.current_price,priceChange24h:t.price_change_percentage_24h,inPortfolio:this.portfolio.has(t.id)})))},parseCoinCapData(t){return t.map((t=>({id:t.id,symbol:t.symbol,name:t.name,image:`https://assets.coincap.io/assets/icons/${t.symbol.toLowerCase()}@2x.png`,rank:t.rank,price:parseFloat(t.priceUsd),priceChange24h:parseFloat(t.changePercent24Hr),inPortfolio:this.portfolio.has(t.id)})))},formatPrice(t){return null===t||void 0===t?"N/A":t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:6})},formatPriceChange(t){return null===t||void 0===t?"N/A":`${t>=0?"+":""}${t.toFixed(2)}%`},getPriceChangeClass(t){return{profit:t>0,loss:t<0,neutral:0===t}},async handleSearch(){if(this.searchQuery.length>2){this.loading=!0,this.error=null;try{let t;if("coingecko"===this.selectedApi){t=`https://api.coingecko.com/api/v3/search?query=${this.searchQuery}`;const o=await fetch(t),a=await o.json(),s=a.coins.slice(0,this.pageSize).map((t=>t.id)).join(",");if(s){const t=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${s}&order=market_cap_desc`),o=await t.json();this.coins=this.parseCoingeckoData(o)}else this.coins=[]}else{t=`https://api.coincap.io/v2/assets?search=${this.searchQuery}&limit=${this.pageSize}`;const o=await fetch(t),a=await o.json();this.coins=this.parseCoinCapData(a.data)}}catch(t){this.error="Failed to search cryptocurrencies",console.error(t)}finally{this.loading=!1}}else 0===this.searchQuery.length&&this.fetchCoins()},handleApiChange(){this.fetchCoins()},togglePortfolio(t){this.portfolio.has(t.id)?this.portfolio.delete(t.id):this.portfolio.add(t.id),t.inPortfolio=!t.inPortfolio,this.savePortfolio()},async savePortfolio(){await chrome.storage.sync.set({portfolio:Array.from(this.portfolio)})},async loadPortfolio(){const t=await chrome.storage.sync.get("portfolio");this.portfolio=new Set(t.portfolio||[])},togglePortfolioView(){this.showPortfolio=!this.showPortfolio},formatHoldings(t){return t?t.toFixed(4):"0.0000"},openTransactionModal(t){this.selectedCoin=t,this.transaction.price=t.price,this.transaction.date=(new Date).toLocaleString("sv-SE",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}).slice(0,16),this.showTransactionModal=!0},closeTransactionModal(){this.showTransactionModal=!1,this.selectedCoin=null,this.transaction={type:"buy",amount:0,price:0,date:(new Date).toLocaleString("sv-SE",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}).slice(0,16)}},async saveTransaction(){try{const t={...this.transaction,coinId:this.selectedCoin.id,timestamp:new Date(this.transaction.date).getTime()},{transactions:o=[]}=await chrome.storage.sync.get("transactions");let a=[...o];if(this.editingTransaction){const s=o.findIndex((t=>t.timestamp===this.editingTransaction.timestamp&&t.coinId===this.editingTransaction.coinId));-1!==s&&(a[s]=t)}else a.push(t);if(await chrome.storage.sync.set({transactions:a}),await this.updateHoldings(),this.showTransactionHistory&&this.selectedCoin){const t=this.coins.find((t=>t.id===this.selectedCoin.id));this.selectedCoin=t;const o=a.filter((t=>t.coinId===this.selectedCoin.id));this.coinTransactions=o.sort(((t,o)=>o.timestamp-t.timestamp))}this.closeTransactionModal()}catch(t){console.error("Failed to save transaction:",t)}},async updateHoldings(){const{transactions:t=[]}=await chrome.storage.sync.get("transactions"),o={},a={};t.forEach((t=>{o[t.coinId]||(o[t.coinId]=0,a[t.coinId]=[]),o[t.coinId]+="buy"===t.type?t.amount:-t.amount,a[t.coinId].push(t)})),this.coins=this.coins.map((t=>({...t,holdings:o[t.id]||0,transactions:a[t.id]||[],pnl:this.calculatePnL({...t,holdings:o[t.id]||0,transactions:a[t.id]||[]})})))},sortBy(t){this.sortConfig.key===t?this.sortConfig.direction="asc"===this.sortConfig.direction?"desc":"asc":(this.sortConfig.key=t,this.sortConfig.direction="asc")},getSortIcon(t){return this.sortConfig.key!==t?"↕️":"asc"===this.sortConfig.direction?"↑":"↓"},async viewTransactions(t){this.selectedCoin=t;const{transactions:o=[]}=await chrome.storage.sync.get("transactions");this.coinTransactions=o.filter((o=>o.coinId===t.id)).sort(((t,o)=>o.timestamp-t.timestamp)),this.showTransactionHistory=!0},closeTransactionHistory(){this.showTransactionHistory=!1,this.selectedCoin=null,this.coinTransactions=[]},editTransaction(t){this.editingTransaction=t,this.transaction={type:t.type,amount:t.amount,price:t.price,date:new Date(t.timestamp).toLocaleString("sv-SE").slice(0,16)},this.showTransactionHistory=!1,this.showTransactionModal=!0},async deleteTransaction(t){if(confirm("Are you sure you want to delete this transaction?"))try{const{transactions:o=[]}=await chrome.storage.sync.get("transactions"),a=o.filter((o=>o.timestamp!==t.timestamp||o.coinId!==t.coinId));if(await chrome.storage.sync.set({transactions:a}),await this.updateHoldings(),this.selectedCoin){const t=this.coins.find((t=>t.id===this.selectedCoin.id));this.selectedCoin=t;const o=a.filter((t=>t.coinId===this.selectedCoin.id));this.coinTransactions=o.sort(((t,o)=>o.timestamp-t.timestamp))}}catch(o){console.error("Failed to delete transaction:",o)}},calculatePnL(t){if(!t.holdings||!t.transactions)return 0;let o=0,a=0;t.transactions.forEach((t=>{"buy"===t.type?(o+=t.price*t.amount,a+=t.amount):(o-=t.price*t.amount,a-=t.amount)}));const s=a?o/a:0,e=t.price*t.holdings,i=s*t.holdings;return e-i},formatPnL(t){return t?`${t>=0?"+":""}$${Math.abs(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"$0.00"},getPnLClass(t){return t?t>0?"profit":"loss":"neutral"},calculateTransactionPnL(t){if(!this.selectedCoin||!t)return 0;const o=this.selectedCoin.price*t.amount,a=t.price*t.amount;return"buy"===t.type?o-a:a-o},formatPnLPercentage(t,o){if(!o)return"0%";const a=t/Math.abs(o)*100;return`${a>=0?"+":""}${a.toFixed(2)}%`},calculateAveragePrice(t){if(!t?.transactions||0===t.transactions.length)return 0;let o=0,a=0;return t.transactions.forEach((t=>{"buy"===t.type?(o+=t.price*t.amount,a+=t.amount):(o-=t.price*t.amount,a-=t.amount)})),a?o/a:0}},async mounted(){await this.loadPortfolio(),await this.fetchCoins(),await this.updateHoldings()}};var vt=a(262);const yt=(0,vt.A)(ft,[["render",gt],["__scopeId","data-v-32ecbb28"]]),Ct=yt,Lt={name:"App",components:{Popup:Ct}},bt=(0,vt.A)(Lt,[["render",i]]),Pt=bt,wt=(0,s.Ef)(Pt);wt.mount("#app")}},o={};function a(s){var e=o[s];if(void 0!==e)return e.exports;var i=o[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,(()=>{var t=[];a.O=(o,s,e,i)=>{if(!s){var n=1/0;for(p=0;p<t.length;p++){for(var[s,e,i]=t[p],r=!0,c=0;c<s.length;c++)(!1&i||n>=i)&&Object.keys(a.O).every((t=>a.O[t](s[c])))?s.splice(c--,1):(r=!1,i<n&&(n=i));if(r){t.splice(p--,1);var l=e();void 0!==l&&(o=l)}}return o}i=i||0;for(var p=t.length;p>0&&t[p-1][2]>i;p--)t[p]=t[p-1];t[p]=[s,e,i]}})(),(()=>{a.d=(t,o)=>{for(var s in o)a.o(o,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o)})(),(()=>{var t={57:0};a.O.j=o=>0===t[o];var o=(o,s)=>{var e,i,[n,r,c]=s,l=0;if(n.some((o=>0!==t[o]))){for(e in r)a.o(r,e)&&(a.m[e]=r[e]);if(c)var p=c(a)}for(o&&o(s);l<n.length;l++)i=n[l],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(p)},s=self["webpackChunkmdw_crypto_portfolio_tracker"]=self["webpackChunkmdw_crypto_portfolio_tracker"]||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],(()=>a(715)));s=a.O(s)})();